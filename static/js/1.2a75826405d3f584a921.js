webpackJsonp([1],{"2vAq":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("fZjL"),n=e.n(a),o=e("4lbf"),i={name:"Cart",data:function(){return{shopCart:[]}},beforeRouteLeave:function(t,s,e){if(confirm("确定离开吗？？")){var a={};this.shopCart.forEach(function(t){a[t.id]=t.num}),o.a.saveGoods(a),e()}else e(!1)},computed:{payment:function(){var t=0,s=0;return this.shopCart.forEach(function(e){e.isSelected&&(t+=e.num*e.sell_price,s+=e.num)}),{total:t,count:s}}},methods:{deleteItem:function(t,s){console.log(o.a),this.shopCart.splice(s,1);var e=t.num;this.$store.dispatch("addShopNumByAction",-e),o.a.removeGoods(t.id)},chageNum:function(){var t={};this.shopCart.forEach(function(s){t[s.id]=s.num}),o.a.saveGoods(t)},addNum:function(t){t.num<t.stock_quantity?(t.num++,this.$store.dispatch("addShopNumByAction",1),this.chageNum()):this.$toast({message:"库存不足",duration:1e3})},substract:function(t){1!=t.num?(t.num--,this.$store.dispatch("addShopNumByAction",-1),this.chageNum()):this.$toast("至少选择1个")}},created:function(){var t=this,s=o.a.getGoodsList(),e=n()(s).join(",");e&&this.$axios.get("goods/getshopcarlist/"+e).then(function(e){t.shopCart=e.data.message,console.log(t.shopCart);for(var a=0;a<t.shopCart.length;a++){var n=t.shopCart[a],o=s[n.id];o&&(t.$set(n,"num",o),t.$set(n,"isSelected",!0))}}).catch(function(t){console.log("购物车列表数据出错"+t)})}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"con"},[e("Navbar",{attrs:{title:"购物车"}}),t._v(" "),e("div",{staticClass:"pay-detail"},[e("ul",t._l(t.shopCart,function(s,a){return e("li",{key:s.id,staticClass:"p-list"},[e("mt-switch",{model:{value:s.isSelected,callback:function(e){t.$set(s,"isSelected",e)},expression:"item.isSelected"}}),t._v(" "),e("img",{attrs:{src:s.img_url}}),t._v(" "),e("div",{staticClass:"pay-calc"},[e("p",[t._v(t._s(s.title))]),t._v(" "),e("div",{staticClass:"calc"},[e("span",[t._v("￥"+t._s(s.sell_price))]),t._v(" "),e("span",{on:{click:function(e){return t.substract(s)}}},[t._v("-")]),t._v(" "),e("span",[t._v(t._s(s.num))]),t._v(" "),e("span",{on:{click:function(e){return t.addNum(s)}}},[t._v("+")]),t._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.deleteItem(s,a)}}},[t._v("删除")])])])],1)}),0)]),t._v(" "),e("div",{staticClass:"show-price"},[e("div",{staticClass:"show-1"},[e("p",[t._v("总计(不含运费)：")]),t._v(" "),e("span",[t._v("已经选择商品"+t._s(t.payment.count)+"件，总价￥"+t._s(t.payment.total)+"元")])]),t._v(" "),e("div",{staticClass:"show-2"},[e("mt-button",{attrs:{type:"danger",size:"large"}},[t._v("去结算")])],1)])],1)},staticRenderFns:[]};var r=e("VU/8")(i,c,!1,function(t){e("MYJN")},"data-v-69cd5a7a",null);s.default=r.exports},Cdx3:function(t,s,e){var a=e("sB3e"),n=e("lktj");e("uqUo")("keys",function(){return function(t){return n(a(t))}})},MYJN:function(t,s){},fZjL:function(t,s,e){t.exports={default:e("jFbC"),__esModule:!0}},jFbC:function(t,s,e){e("Cdx3"),t.exports=e("FeBl").Object.keys},uqUo:function(t,s,e){var a=e("kM2E"),n=e("FeBl"),o=e("S82l");t.exports=function(t,s){var e=(n.Object||{})[t]||Object[t],i={};i[t]=s(e),a(a.S+a.F*o(function(){e(1)}),"Object",i)}}});